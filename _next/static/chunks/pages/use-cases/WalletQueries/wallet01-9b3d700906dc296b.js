(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[273],{647:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/use-cases/WalletQueries/wallet01",function(){return t(2511)}])},2511:function(e,s,t){"use strict";t.r(s),t.d(s,{__toc:function(){return c}});var a=t(5893),l=t(2673),n=t(2169),r=t(2069);t(9488);var o=t(2643),i=t(2154);let c=[{depth:2,value:"1. Find the ADA balance of a wallet",id:"1-find-the-ada-balance-of-a-wallet"},{depth:3,value:"Calculate the Balance between the following two sub-queries:",id:"calculate-the-balance-between-the-following-two-sub-queries"},{depth:3,value:"Calculate Total Received Value:",id:"calculate-total-received-value"},{depth:3,value:"Calculate Total Spent Value:",id:"calculate-total-spent-value"},{depth:3,value:"Summary:",id:"summary"}];function d(e){let s=Object.assign({h2:"h2",p:"p",strong:"strong",ul:"ul",li:"li",a:"a",code:"code",pre:"pre",span:"span",details:"details",summary:"summary",em:"em",h3:"h3"},(0,o.a)(),e.components);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.h2,{id:"1-find-the-ada-balance-of-a-wallet",children:"1. Find the ADA balance of a wallet"}),"\n",(0,a.jsxs)(s.p,{children:["Let's start with something simple but essential: ",(0,a.jsx)(s.strong,{children:"viewing your portfolio"}),". Specifically, we'll look at how to display the total balance of ADA holdings associated with a wallet address."]}),"\n",(0,a.jsx)(i.UW,{type:"warning",emoji:"⚠️",children:(0,a.jsx)(s.p,{children:"Before we dive in, ensure that you have installed and configured Ledger Sync on your chosen network. Allow it to fully synchronize, and once the database is synced, you can start performing SQL queries using your preferred tool."})}),"\n",(0,a.jsx)(s.p,{children:"The following networks are available:"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:(0,a.jsx)(s.a,{href:"https://book.world.dev.cardano.org/env-private.html",children:"Private Testnet"})}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.a,{href:"https://book.world.dev.cardano.org/env-sanchonet.html",children:"Sanchonet Testnet"})," ...see also ",(0,a.jsx)(s.a,{href:"https://sancho.network/",children:"Sancho.network"})]}),"\n",(0,a.jsx)(s.li,{children:(0,a.jsx)(s.a,{href:"https://book.world.dev.cardano.org/env-preview.html",children:"Preview Testnet"})}),"\n",(0,a.jsx)(s.li,{children:(0,a.jsx)(s.a,{href:"https://book.world.dev.cardano.org/env-preprod.html",children:"Pre-production Testnet"})}),"\n",(0,a.jsx)(s.li,{children:(0,a.jsx)(s.a,{href:"https://book.world.dev.cardano.org/env-mainnet.html",children:"Production (Mainnet)"})}),"\n"]}),"\n",(0,a.jsxs)(s.p,{children:["For most of our examples, we will query the same preprod address, which takes the following format:\n",(0,a.jsx)(s.code,{children:"addr_test1qr70pedl22tnzswcfm39nqvsfan9jgtym2k0lgrftga8j67jel8q0vyag8770e8pu3rf6he70dtrexrsg6waj09cae0svmt57t"})]}),"\n",(0,a.jsx)(i.UW,{type:"info",emoji:"\uD83D\uDCA1",children:(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:["You can get test tokens for pre-production and preview testnets using this ",(0,a.jsx)(s.a,{href:"https://developers.cardano.org/docs/get-started/cardano-cli/get-started/",children:"faucet"})]}),"\n",(0,a.jsxs)(s.li,{children:["For SanchoNet tokens, go to the ",(0,a.jsx)(s.a,{href:"https://sancho.network/faucet",children:"SanchoNet faucet"}),"."]}),"\n"]})}),"\n",(0,a.jsx)(s.pre,{"data-language":"sql","data-theme":"default",children:(0,a.jsxs)(s.code,{"data-language":"sql","data-theme":"default",children:[(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"SELECT"})}),"\n",(0,a.jsxs)(s.span,{className:"line",children:[(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    ("}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"coalesce"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(sum1.value,"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:") "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"coalesce"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(sum2.value,"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")) "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"as"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" result"})]}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"FROM"})}),"\n",(0,a.jsxs)(s.span,{className:"line",children:[(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    ("}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"SELECT"})]}),"\n",(0,a.jsxs)(s.span,{className:"line",children:[(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"SUM"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(to1.value) "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"as"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"value"})]}),"\n",(0,a.jsxs)(s.span,{className:"line",children:[(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"FROM"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx_out to1"})]}),"\n",(0,a.jsxs)(s.span,{className:"line",children:[(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"WHERE"})]}),"\n",(0,a.jsxs)(s.span,{className:"line",children:[(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        to1.address "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'addr_test1qr70pedl22tnzswcfm39nqvsfan9jgtym2k0lgrftga8j67jel8q0vyag8770e8pu3rf6he70dtrexrsg6waj09cae0svmt57t'"})]}),"\n",(0,a.jsxs)(s.span,{className:"line",children:[(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    ) "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"as"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" sum1,"})]}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "})}),"\n",(0,a.jsxs)(s.span,{className:"line",children:[(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    ("}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"SELECT"})]}),"\n",(0,a.jsxs)(s.span,{className:"line",children:[(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"SUM"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(to2.value) "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"as"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"value"})]}),"\n",(0,a.jsxs)(s.span,{className:"line",children:[(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"FROM"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx_in ti"})]}),"\n",(0,a.jsxs)(s.span,{className:"line",children:[(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"JOIN"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx_out to2 "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"ON"})]}),"\n",(0,a.jsxs)(s.span,{className:"line",children:[(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        ti.tx_out_id "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" to2.tx_id"})]}),"\n",(0,a.jsxs)(s.span,{className:"line",children:[(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AND"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ti.tx_out_index "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" to2."}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"index"'})]}),"\n",(0,a.jsxs)(s.span,{className:"line",children:[(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"WHERE"})]}),"\n",(0,a.jsxs)(s.span,{className:"line",children:[(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        to2.address "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'addr_test1qr70pedl22tnzswcfm39nqvsfan9jgtym2k0lgrftga8j67jel8q0vyag8770e8pu3rf6he70dtrexrsg6waj09cae0svmt57t'"})]}),"\n",(0,a.jsxs)(s.span,{className:"line",children:[(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    ) "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"as"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" sum2;"})]})]})}),"\n",(0,a.jsxs)(s.details,{children:[(0,a.jsx)(s.summary,{children:(0,a.jsx)(s.p,{children:"Expected results format"})}),(0,a.jsx)(s.pre,{"data-language":"sql","data-theme":"default",children:(0,a.jsx)(s.code,{"data-language":"sql","data-theme":"default",children:(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"4645032877132"})})})})]}),"\n",(0,a.jsx)(s.p,{children:"There are few ways to obtain this information. In this SQL query, we calculate the balance of a specific address by subtracting the the total funds spent from the total funds received. In UTXO terms, we are subtracting the total value of spent outputs from the total value of received outputs."}),"\n",(0,a.jsx)(i.UW,{emoji:"✍️",children:(0,a.jsxs)(s.p,{children:["Note: Cardano (like Bitcoin) leverages the Unspent Transaction Output (UTXO) model to keep track of user state/balances. This is different to the account-based model employed by Ethereum. Cardano implements an innovative Extended Unspent Transaction Output (EUTxO) model. If you are new to Cardano, or need a recap, the ",(0,a.jsx)(s.a,{href:"https://aiken-lang.org/fundamentals/eutxo",children:"EUTxO crash course"})," from the ",(0,a.jsx)(s.em,{children:"Aiken"})," team is essential reading."]})}),"\n",(0,a.jsx)(s.p,{children:"\uD83D\uDD0E Here's a breakdown of what the query does:"}),"\n",(0,a.jsxs)(i.Rg,{children:[(0,a.jsx)(s.h3,{id:"calculate-the-balance-between-the-following-two-sub-queries",children:"Calculate the Balance between the following two sub-queries:"}),(0,a.jsx)(s.pre,{"data-language":"sql","data-theme":"default",children:(0,a.jsxs)(s.code,{"data-language":"sql","data-theme":"default",children:[(0,a.jsxs)(s.span,{className:"line",children:[(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"SELECT"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ("}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"COALESCE"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(sum1.value, "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:") "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"COALESCE"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(sum2.value, "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")) "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"as"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" result "})]}),"\n",(0,a.jsxs)(s.span,{className:"line",children:[(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"FROM"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" (subquery1) "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" sum1, (subquery2) "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" sum2"})]})]})}),(0,a.jsxs)(s.p,{children:["The main clause calculates the difference between the total received value ",(0,a.jsx)(s.code,{children:"sum1.value"})," and the total spent value ",(0,a.jsx)(s.code,{children:"sum2.value"}),". The ",(0,a.jsx)(s.code,{children:"COALESCE"})," function is used to ensure that if either ",(0,a.jsx)(s.code,{children:"sum1.value"})," or ",(0,a.jsx)(s.code,{children:"sum2.value"})," is NULL, it is treated as '0'. The result is aliased as ",(0,a.jsx)(s.code,{children:"result"}),". The ",(0,a.jsx)(s.code,{children:"FROM"})," clause contains two nested subqueries, which are outlined next."]}),(0,a.jsx)(s.h3,{id:"calculate-total-received-value",children:"Calculate Total Received Value:"}),(0,a.jsx)(s.pre,{"data-language":"sql","data-theme":"default",children:(0,a.jsxs)(s.code,{"data-language":"sql","data-theme":"default",children:[(0,a.jsxs)(s.span,{className:"line",children:[(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"SELECT"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"SUM"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(to1.value) "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"as"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"value"})]}),"\n",(0,a.jsxs)(s.span,{className:"line",children:[(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"FROM"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx_out to1"})]}),"\n",(0,a.jsxs)(s.span,{className:"line",children:[(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"WHERE"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" to1.address "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'addr_test1qr70pedl22tnzswcfm39nqvsfan9jgtym2k0lgrftga8j67jel8q0vyag8770e8pu3rf6he70dtrexrsg6waj09cae0svmt57t'"})]})]})}),(0,a.jsxs)(s.p,{children:["This first subquery ",(0,a.jsx)(s.code,{children:"sum1"})," calculates the total value of all outputs sent (in lovelace) to the specified address ",(0,a.jsx)(s.code,{children:"addr_test1qr70pedl22tnzswcfm39nqvsfan9jgtym2k0lgrftga8j67jel8q0vyag8770e8pu3rf6he70dtrexrsg6waj09cae0svmt57t"}),".\nThe ",(0,a.jsx)(s.code,{children:"FROM tx_out to1"})," clause specifies the ",(0,a.jsx)(s.a,{href:"https://github.com/cardano-foundation/cf-ledger-sync/blob/main/docs/pages/schema.md#tx_out",children:"tx_out"})," table as the source and gives it the alias ",(0,a.jsx)(s.code,{children:"to1"})," for easier reference. The ",(0,a.jsx)(s.code,{children:"WHERE to1.address"})," clause filters the results to only include transactions for our address."]}),(0,a.jsx)(s.h3,{id:"calculate-total-spent-value",children:"Calculate Total Spent Value:"}),(0,a.jsx)(s.pre,{"data-language":"sql","data-theme":"default",children:(0,a.jsxs)(s.code,{"data-language":"sql","data-theme":"default",children:[(0,a.jsxs)(s.span,{className:"line",children:[(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"SELECT"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"SUM"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(to2.value) "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"as"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"value"})]}),"\n",(0,a.jsxs)(s.span,{className:"line",children:[(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"FROM"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx_in ti"})]}),"\n",(0,a.jsxs)(s.span,{className:"line",children:[(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"JOIN"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx_out to2 "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"ON"})]}),"\n",(0,a.jsxs)(s.span,{className:"line",children:[(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    ti.tx_out_id "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" to2.tx_id"})]}),"\n",(0,a.jsxs)(s.span,{className:"line",children:[(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AND"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ti.tx_out_index "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" to2."}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"index"'})]}),"\n",(0,a.jsxs)(s.span,{className:"line",children:[(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"WHERE"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" to2.address "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'addr_test1qr70pedl22tnzswcfm39nqvsfan9jgtym2k0lgrftga8j67jel8q0vyag8770e8pu3rf6he70dtrexrsg6waj09cae0svmt57t'"})]})]})}),(0,a.jsxs)(s.p,{children:["This second subquery ",(0,a.jsx)(s.code,{children:"sum2"})," calculates the total value of all outputs (in lovelace) from the specified address that have been spent. It does this by joining the ",(0,a.jsx)(s.a,{href:"https://github.com/cardano-foundation/cf-ledger-sync/blob/main/docs/pages/schema.md#tx_in",children:"tx_in"})," (alias ",(0,a.jsx)(s.code,{children:"ti"}),") and ",(0,a.jsx)(s.a,{href:"https://github.com/cardano-foundation/cf-ledger-sync/blob/main/docs/pages/schema.md#tx_out",children:"tx_out"})," (alias ",(0,a.jsx)(s.code,{children:"to2"}),") tables to find the corresponding spent outputs.\nThe ",(0,a.jsx)(s.code,{children:"JOIN"})," condition ensures we only count outputs that were used as inputs in other transactions (i.e., spent funds). ",(0,a.jsx)(s.code,{children:"WHERE to2.address"})," filters the results to only include transactions for our address and the result is also aliased as ",(0,a.jsx)(s.code,{children:"value"}),"."]}),(0,a.jsx)(s.h3,{id:"summary",children:"Summary:"}),(0,a.jsx)(s.p,{children:"This query effectively provides the current balance of the specified address by querying the database for:"}),(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:"The total lovelace this has address received (sum1)"}),"\n",(0,a.jsx)(s.li,{children:"The total lovelace this address sent (sum2)"}),"\n",(0,a.jsx)(s.li,{children:"The difference between the two (result)"}),"\n"]}),(0,a.jsxs)(s.p,{children:["Another way to check the balance is by summing up all the ",(0,a.jsx)(s.a,{href:"https://docs.cardano.org/about-cardano/learn/eutxo-explainer/",children:"UTXOs"})," associated with the wallet address."]})]})]})}let h={MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,o.a)(),e.components);return s?(0,a.jsx)(s,{...e,children:(0,a.jsx)(d,{...e})}):d(e)},pageOpts:{filePath:"pages/use-cases/WalletQueries/wallet01.mdx",route:"/use-cases/WalletQueries/wallet01",timestamp:1729499085e3,pageMap:[{kind:"Meta",data:{index:"Overview",design:"Design",docker:"Run with Docker Compose",schema:"Schema",build_run:"Build & Run",live_n2c_data:"Live data from Node",applications:{title:"Applications"},"use-cases":{title:"Use Cases"},about:{title:"About",type:"page"}}},{kind:"MdxPage",name:"about",route:"/about"},{kind:"Folder",name:"applications",route:"/applications",children:[{kind:"Meta",data:{ledger_sync_app:"Ledger Sync",streamer_app:"Ledger Sync Streamer"}},{kind:"MdxPage",name:"ledger_sync_app",route:"/applications/ledger_sync_app"},{kind:"MdxPage",name:"streamer_app",route:"/applications/streamer_app"}]},{kind:"MdxPage",name:"build_run",route:"/build_run"},{kind:"MdxPage",name:"design",route:"/design"},{kind:"MdxPage",name:"docker",route:"/docker"},{kind:"MdxPage",name:"index",route:"/"},{kind:"MdxPage",name:"live_n2c_data",route:"/live_n2c_data"},{kind:"MdxPage",name:"schema",route:"/schema"},{kind:"Folder",name:"use-cases",route:"/use-cases",children:[{kind:"Folder",name:"WalletQueries",route:"/use-cases/WalletQueries",children:[{kind:"Meta",data:{wallet01:"Find the ADA balance of a wallet",wallet02:"List a balance's UTXOs",wallet03:"Review wallet transaction history",wallet04:"List all tokens in a wallet",wallet05:"Query collection details",wallet06:"Query Token metadata",wallet07:"Query Active Stake Pools",wallet08:"Query Stake Pool details",wallet09:"Stake pool lifetime blocks",wallet10:"List current dReps",wallet11:"Find Active Governance Proposals",wallet12:"Smart contract transaction data"}},{kind:"MdxPage",name:"wallet01",route:"/use-cases/WalletQueries/wallet01"},{kind:"MdxPage",name:"wallet02",route:"/use-cases/WalletQueries/wallet02"},{kind:"MdxPage",name:"wallet03",route:"/use-cases/WalletQueries/wallet03"},{kind:"MdxPage",name:"wallet04",route:"/use-cases/WalletQueries/wallet04"},{kind:"MdxPage",name:"wallet05",route:"/use-cases/WalletQueries/wallet05"},{kind:"MdxPage",name:"wallet06",route:"/use-cases/WalletQueries/wallet06"},{kind:"MdxPage",name:"wallet07",route:"/use-cases/WalletQueries/wallet07"},{kind:"MdxPage",name:"wallet08",route:"/use-cases/WalletQueries/wallet08"},{kind:"MdxPage",name:"wallet09",route:"/use-cases/WalletQueries/wallet09"},{kind:"MdxPage",name:"wallet10",route:"/use-cases/WalletQueries/wallet10"},{kind:"MdxPage",name:"wallet11",route:"/use-cases/WalletQueries/wallet11"},{kind:"MdxPage",name:"wallet12",route:"/use-cases/WalletQueries/wallet12"}]},{kind:"MdxPage",name:"WalletQueries",route:"/use-cases/WalletQueries"},{kind:"Meta",data:{WalletQueries:"Wallet queries",nftqueries:"NFT marketplace"}},{kind:"Folder",name:"nftqueries",route:"/use-cases/nftqueries",children:[{kind:"Meta",data:{nft1:"View Collections",nft2:"View NFT collection details",nft3:"View all assets",nft4:"Minting an NFT",nft5:"Selling an NFT",nft6:"Buying an NFT"}},{kind:"MdxPage",name:"nft1",route:"/use-cases/nftqueries/nft1"},{kind:"MdxPage",name:"nft2",route:"/use-cases/nftqueries/nft2"},{kind:"MdxPage",name:"nft3",route:"/use-cases/nftqueries/nft3"},{kind:"MdxPage",name:"nft4",route:"/use-cases/nftqueries/nft4"},{kind:"MdxPage",name:"nft5",route:"/use-cases/nftqueries/nft5"},{kind:"MdxPage",name:"nft6",route:"/use-cases/nftqueries/nft6"}]},{kind:"MdxPage",name:"nftqueries",route:"/use-cases/nftqueries"}]},{kind:"MdxPage",name:"use-cases",route:"/use-cases"}],flexsearch:{codeblocks:!0},title:"Wallet01",headings:c},pageNextRoute:"/use-cases/WalletQueries/wallet01",nextraLayout:n.ZP,themeConfig:r.Z};s.default=(0,l.j)(h)},2069:function(e,s,t){"use strict";var a=t(5893);t(7294);let l={logo:(0,a.jsx)("span",{children:(0,a.jsx)("b",{children:"Ledger Sync"})}),project:{link:"https://github.com/cardano-foundation/cf-ledger-sync"},chat:{link:"https://discord.gg/jw3yeYJw"},docsRepositoryBase:"https://github.com/cardano-foundation/cf-ledger-sync",footer:{text:"Ledger Sync project"},useNextSeoProps:()=>({titleTemplate:"%s – Ledger Sync"}),head:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("meta",{property:"description",content:"Ledger Sync is a Java-based application designed to provide efficient access to Cardano blockchain data"}),(0,a.jsx)("meta",{property:"og:title",content:"Ledger Sync is a Java-based application designed to provide efficient access to Cardano blockchain data"}),(0,a.jsx)("meta",{property:"og:description",content:"Ledger Sync is a Java-based application designed to provide efficient access to Cardano blockchain data"})]})};s.Z=l},5789:function(){}},function(e){e.O(0,[942,888,774,179],function(){return e(e.s=647)}),_N_E=e.O()}]);