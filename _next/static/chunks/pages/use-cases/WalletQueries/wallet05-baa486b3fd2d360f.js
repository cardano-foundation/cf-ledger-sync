(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[159],{7553:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/use-cases/WalletQueries/wallet05",function(){return r(239)}])},239:function(e,s,r){"use strict";r.r(s),r.d(s,{__toc:function(){return c}});var l=r(5893),n=r(2673),t=r(2169),i=r(2069);r(9488);var o=r(2643),a=r(2154);let c=[{depth:2,value:"5. Query collection details",id:"5-query-collection-details"},{depth:3,value:"Data Sources",id:"data-sources"},{depth:3,value:"Main Query (SELECT...FROM)",id:"main-query-selectfrom"},{depth:3,value:"First Subquery (LEFT JOIN...num_of_tx)",id:"first-subquery-left-joinnum_of_tx"},{depth:3,value:"Second Subquery (LEFT JOIN...num_of_holders)",id:"second-subquery-left-joinnum_of_holders"},{depth:3,value:"Joining Subqueries",id:"joining-subqueries"},{depth:3,value:"Summary",id:"summary"}];function d(e){let s=Object.assign({h2:"h2",p:"p",code:"code",a:"a",pre:"pre",span:"span",details:"details",summary:"summary",h3:"h3",ul:"ul",li:"li"},(0,o.a)(),e.components);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.h2,{id:"5-query-collection-details",children:"5. Query collection details"}),"\n",(0,l.jsx)(s.p,{children:"To keep things simple, we will use the same address as before:"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.code,{children:"addr_test1qr70pedl22tnzswcfm39nqvsfan9jgtym2k0lgrftga8j67jel8q0vyag8770e8pu3rf6he70dtrexrsg6waj09cae0svmt57t"})}),"\n",(0,l.jsxs)(s.p,{children:["\uD83D\uDD0E You can also verify the details on one of many Cardano Community Explorers listed ",(0,l.jsx)(s.a,{href:"https://explorer.cardano.org/en/",children:"here"}),". For this one, lets use ",(0,l.jsx)(s.a,{href:"https://preprod.cardanoscan.io/address/00fcf0e5bf52973141d84ee25981904f66592164daacffa0695a3a796bd2cfce07b09d41fde7e4e1e4469d5f3e7b563c9870469dd93cb8ee5f",children:"Cardanoscan"})," \uD83C\uDFAF"]}),"\n",(0,l.jsxs)(s.p,{children:["For this example, we are querying this specific token ",(0,l.jsx)(s.code,{children:"asset1nvcwnq60jnm27efjm87xnhqt6alsv024tdyxjm"}),". We want to retrieve the following details: a) Script hash, b) Total supply, c)creation date, d) Number of holders, e) Number of transactions in the past week."]}),"\n",(0,l.jsx)(s.pre,{"data-language":"sql","data-theme":"default",children:(0,l.jsxs)(s.code,{"data-language":"sql","data-theme":"default",children:[(0,l.jsx)(s.span,{className:"line",children:(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"SELECT"})}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"		ma.policy "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" scriptHash,"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"		ma.supply "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" totalSupply,"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"		ma.time "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" createdDate,"})]}),"\n",(0,l.jsx)(s.span,{className:"line",children:(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"		num_of_holders.numHolder,"})}),"\n",(0,l.jsx)(s.span,{className:"line",children:(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"		num_of_tx.numTx"})}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"	"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"FROM"})]}),"\n",(0,l.jsx)(s.span,{className:"line",children:(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"		preprod.multi_asset ma"})}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"	"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"LEFT JOIN"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ("})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"			"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"SELECT"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ma.fingerprint "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" fingerprint, "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"COUNT"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"DISTINCT"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx.id) "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" numTx"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"			"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"FROM"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"			"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"LEFT JOIN"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx_out txo "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"ON"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx.id "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" txo.tx_id "})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"			"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"JOIN"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"block"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" b "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"ON"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" b.id "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx.block_id "})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"			"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"JOIN"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ma_tx_out mto "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"ON"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" txo.id "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" mto.tx_out_id"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"			"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"JOIN"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" multi_asset ma "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"ON"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" mto.ident "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ma.id"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"			"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"WHERE"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"			   ma.fingerprint "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'asset1nvcwnq60jnm27efjm87xnhqt6alsv024tdyxjm'"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"			   "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AND"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" b.time "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:">"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ("}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"now"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"() "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"at"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"time"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"zone"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'utc'"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:") "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" INTERVAL "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'7 days'"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"			"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"GROUP BY"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ma.fingerprint"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"			) "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" num_of_tx "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"ON"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" num_of_tx.fingerprint "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ma.fingerprint"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"	"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"LEFT JOIN"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ("})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"			"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"SELECT"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ma.fingerprint "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" fingerprint, "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"COUNT"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"DISTINCT"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(sa.id)) "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" numHolder"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"			"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"FROM"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ma_tx_out mto"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"			"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"LEFT JOIN"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx_out to2 "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"ON"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" mto.tx_out_id "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" to2.id"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"			"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"LEFT JOIN"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx_in ti "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"ON"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ti.tx_out_index "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" to2."}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"index"'})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"				"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AND"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ti.tx_out_id "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" to2.tx_id"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"			"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"JOIN"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" multi_asset ma "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"ON"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ma.id "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" mto.ident"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"			"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"LEFT JOIN"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" stake_address sa "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"ON"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" sa.id "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" to2.stake_address_id"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"			"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"WHERE"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"				ma.fingerprint "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'asset1nvcwnq60jnm27efjm87xnhqt6alsv024tdyxjm'"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"				"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AND"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ti.id "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"IS"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"NULL"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"				"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AND"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" sa.id "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"IS NOT NULL"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"			"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"GROUP BY"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ma.fingerprint"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"			) "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" num_of_holders "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"ON"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" num_of_holders.fingerprint "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ma.fingerprint"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"	"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"WHERE"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"		ma.fingerprint "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'asset1nvcwnq60jnm27efjm87xnhqt6alsv024tdyxjm'"})]})]})}),"\n",(0,l.jsxs)(s.details,{children:[(0,l.jsx)(s.summary,{children:(0,l.jsx)(s.p,{children:"Expected results format"})}),(0,l.jsx)(s.pre,{"data-language":"sql","data-theme":"default",children:(0,l.jsxs)(s.code,{"data-language":"sql","data-theme":"default",children:[(0,l.jsx)(s.span,{className:"line",children:" "}),"\n",(0,l.jsx)(s.span,{className:"line",children:(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"     scripthash                                          |      totalsupply       |        createddate |datum_hash | numtx"})}),"\n",(0,l.jsx)(s.span,{className:"line",children:(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"---------------------------------------------------------+------------------------+--------------------+-----------+------- "})}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"698a6ea0ca99f315034072af31eaac6ec11fe8558d3f48e9775aab9d | "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"45"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"000"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"000"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"000"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"000"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"000"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" | "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"2022"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"12"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"12"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"18"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:":"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"28"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:":"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"01"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"|  "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"046"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    |  "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"33"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"           "})]}),"\n",(0,l.jsx)(s.span,{className:"line",children:(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "})}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"rows"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")"})]})]})})]}),"\n",(0,l.jsxs)(s.p,{children:["\uD83D\uDD0E We can always cross check our results on any Cardano Explorer, such as ",(0,l.jsx)(s.a,{href:"https://preprod.cexplorer.io/policy/698a6ea0ca99f315034072af31eaac6ec11fe8558d3f48e9775aab9d#data",children:"cexplorer"})," \uD83C\uDFAF"]}),"\n",(0,l.jsx)(s.p,{children:"\uD83E\uDDD0 Let's breakdown the query line by line:"}),"\n",(0,l.jsxs)(a.Rg,{children:[(0,l.jsx)(s.h3,{id:"data-sources",children:"Data Sources"}),(0,l.jsx)(s.p,{children:"The query traverses multiple tables to find the requested details:"}),(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.a,{href:"https://github.com/cardano-foundation/cf-ledger-sync/blob/main/docs/pages/schema.md#multi_asset",children:"multi_asset"})," (alias ma) table stores information about the asset itself."]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.a,{href:"https://github.com/cardano-foundation/cf-ledger-sync/blob/main/docs/pages/schema.md#tx",children:"tx"}),", ie. transaction data."]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.a,{href:"https://github.com/cardano-foundation/cf-ledger-sync/blob/main/docs/pages/schema.md#tx_out",children:"tx_out"}),"stores transaction output data, where assets end up after a transaction."]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.a,{href:"https://github.com/cardano-foundation/cf-ledger-sync/blob/main/docs/pages/schema.md#block",children:"block"})," refers to blockchain block data. Transactions are grouped into blocks."]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.a,{href:"https://github.com/cardano-foundation/cf-ledger-sync/blob/main/docs/pages/schema.md#ma_tx_out",children:"ma_tx_out"})," table links multi-asset entries to transaction outputs."]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.a,{href:"https://github.com/cardano-foundation/cf-ledger-sync/blob/main/docs/pages/schema.md#stake_address",children:"stake_address"})," table stores information about wallet addresses."]}),"\n"]}),(0,l.jsx)(s.h3,{id:"main-query-selectfrom",children:"Main Query (SELECT...FROM)"}),(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["The query starts by selecting the desired columns from the ",(0,l.jsx)(s.a,{href:"https://github.com/cardano-foundation/cf-ledger-sync/blob/main/docs/pages/schema.md#multi_asset",children:"multi_asset"})," table."]}),"\n",(0,l.jsxs)(s.li,{children:["It filters for the target asset using it's unique fingerprint ",(0,l.jsx)(s.code,{children:"asset1nvcwnq60jnm27efjm87xnhqt6alsv024tdyxjm"})]}),"\n"]}),(0,l.jsx)(s.h3,{id:"first-subquery-left-joinnum_of_tx",children:"First Subquery (LEFT JOIN...num_of_tx)"}),(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"This subquery calculates the number of transactions within the past 7 days for our specific asset."}),"\n",(0,l.jsx)(s.li,{children:"It joins transaction data with block data to filter by time."}),"\n",(0,l.jsx)(s.li,{children:"It groups the results by the asset's fingerprint and counts distinct transaction IDs."}),"\n"]}),(0,l.jsx)(s.h3,{id:"second-subquery-left-joinnum_of_holders",children:"Second Subquery (LEFT JOIN...num_of_holders)"}),(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"This subquery calculates the number of distinct holders of the asset."}),"\n",(0,l.jsxs)(s.li,{children:["It queries transaction outputs ",(0,l.jsx)(s.code,{children:"tx_out"})," and the links to multi-assets."]}),"\n",(0,l.jsx)(s.li,{children:"It filters out transaction outputs that are inputs to other transactions."}),"\n",(0,l.jsx)(s.li,{children:"It counts distinct stake addresses associated with the remaining outputs, where each address represents a holder."}),"\n"]}),(0,l.jsx)(s.h3,{id:"joining-subqueries",children:"Joining Subqueries"}),(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["The main query uses a ",(0,l.jsx)(s.code,{children:"LEFT JOIN"})," to combine the results of the two subqueries back to the main ",(0,l.jsx)(s.a,{href:"https://github.com/cardano-foundation/cf-ledger-sync/blob/main/docs/pages/schema.md#multi_asset",children:"multi_asset"})," table."]}),"\n",(0,l.jsxs)(s.li,{children:["The LEFT JOIN ensures that the main query returns a row even if the subqueries don't find matching data (in that case, ",(0,l.jsx)(s.code,{children:"num_of_tx"})," and ",(0,l.jsx)(s.code,{children:"num_of_holders"})," would be NULL)."]}),"\n"]}),(0,l.jsx)(s.h3,{id:"summary",children:"Summary"}),(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"A fingerprint is a unique identifier used to distinguish different assets on the Cardano blockchain."}),"\n",(0,l.jsxs)(s.li,{children:["The ",(0,l.jsx)(s.code,{children:"LEFT JOIN"})," type of join ensures you get results even if there's no matching data in the joined tables."]}),"\n",(0,l.jsx)(s.li,{children:"Subqueries are used to calculate more complex values like transaction counts and holder counts that can't be directly derived from a single table."}),"\n"]})]})]})}let h={MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,o.a)(),e.components);return s?(0,l.jsx)(s,{...e,children:(0,l.jsx)(d,{...e})}):d(e)},pageOpts:{filePath:"pages/use-cases/WalletQueries/wallet05.mdx",route:"/use-cases/WalletQueries/wallet05",timestamp:1726129223e3,pageMap:[{kind:"Meta",data:{index:"Overview",design:"Design",docker:"Run with Docker Compose",schema:"Schema",build_run:"Build & Run",applications:{title:"Applications"},"use-cases":{title:"Use Cases"},about:{title:"About",type:"page"}}},{kind:"MdxPage",name:"about",route:"/about"},{kind:"Folder",name:"applications",route:"/applications",children:[{kind:"Meta",data:{ledger_sync_app:"Ledger Sync",streamer_app:"Ledger Sync Streamer"}},{kind:"MdxPage",name:"ledger_sync_app",route:"/applications/ledger_sync_app"},{kind:"MdxPage",name:"streamer_app",route:"/applications/streamer_app"}]},{kind:"MdxPage",name:"build_run",route:"/build_run"},{kind:"MdxPage",name:"design",route:"/design"},{kind:"MdxPage",name:"docker",route:"/docker"},{kind:"MdxPage",name:"index",route:"/"},{kind:"MdxPage",name:"schema",route:"/schema"},{kind:"Folder",name:"use-cases",route:"/use-cases",children:[{kind:"Folder",name:"WalletQueries",route:"/use-cases/WalletQueries",children:[{kind:"Meta",data:{wallet01:"Find the ADA balance of a wallet",wallet02:"List a balance's UTXOs",wallet03:"Review wallet transaction history",wallet04:"List all tokens in a wallet",wallet05:"Query collection details",wallet06:"Query Token metadata",wallet07:"Query Active Stake Pools",wallet08:"Query Stake Pool details",wallet09:"Stake pool lifetime blocks",wallet10:"List current dReps",wallet11:"Find Active Governance Proposals",wallet12:"Smart contract transaction data"}},{kind:"MdxPage",name:"wallet01",route:"/use-cases/WalletQueries/wallet01"},{kind:"MdxPage",name:"wallet02",route:"/use-cases/WalletQueries/wallet02"},{kind:"MdxPage",name:"wallet03",route:"/use-cases/WalletQueries/wallet03"},{kind:"MdxPage",name:"wallet04",route:"/use-cases/WalletQueries/wallet04"},{kind:"MdxPage",name:"wallet05",route:"/use-cases/WalletQueries/wallet05"},{kind:"MdxPage",name:"wallet06",route:"/use-cases/WalletQueries/wallet06"},{kind:"MdxPage",name:"wallet07",route:"/use-cases/WalletQueries/wallet07"},{kind:"MdxPage",name:"wallet08",route:"/use-cases/WalletQueries/wallet08"},{kind:"MdxPage",name:"wallet09",route:"/use-cases/WalletQueries/wallet09"},{kind:"MdxPage",name:"wallet10",route:"/use-cases/WalletQueries/wallet10"},{kind:"MdxPage",name:"wallet11",route:"/use-cases/WalletQueries/wallet11"},{kind:"MdxPage",name:"wallet12",route:"/use-cases/WalletQueries/wallet12"}]},{kind:"MdxPage",name:"WalletQueries",route:"/use-cases/WalletQueries"},{kind:"Meta",data:{WalletQueries:"Wallet queries",nftqueries:"NFT marketplace"}},{kind:"Folder",name:"nftqueries",route:"/use-cases/nftqueries",children:[{kind:"Meta",data:{nft1:"View Collections",nft2:"View NFT collection details",nft3:"View all assets",nft4:"Minting an NFT",nft5:"Selling an NFT",nft6:"Buying an NFT"}},{kind:"MdxPage",name:"nft1",route:"/use-cases/nftqueries/nft1"},{kind:"MdxPage",name:"nft2",route:"/use-cases/nftqueries/nft2"},{kind:"MdxPage",name:"nft3",route:"/use-cases/nftqueries/nft3"},{kind:"MdxPage",name:"nft4",route:"/use-cases/nftqueries/nft4"},{kind:"MdxPage",name:"nft5",route:"/use-cases/nftqueries/nft5"},{kind:"MdxPage",name:"nft6",route:"/use-cases/nftqueries/nft6"}]},{kind:"MdxPage",name:"nftqueries",route:"/use-cases/nftqueries"}]},{kind:"MdxPage",name:"use-cases",route:"/use-cases"}],flexsearch:{codeblocks:!0},title:"Wallet05",headings:c},pageNextRoute:"/use-cases/WalletQueries/wallet05",nextraLayout:t.ZP,themeConfig:i.Z};s.default=(0,n.j)(h)},2069:function(e,s,r){"use strict";var l=r(5893);r(7294);let n={logo:(0,l.jsx)("span",{children:(0,l.jsx)("b",{children:"Ledger Sync"})}),project:{link:"https://github.com/cardano-foundation/cf-ledger-sync"},chat:{link:"https://discord.gg/jw3yeYJw"},docsRepositoryBase:"https://github.com/cardano-foundation/cf-ledger-sync",footer:{text:"Ledger Sync project"},useNextSeoProps:()=>({titleTemplate:"%s â€“ Ledger Sync"}),head:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("meta",{property:"description",content:"Ledger Sync is a Java-based application designed to provide efficient access to Cardano blockchain data"}),(0,l.jsx)("meta",{property:"og:title",content:"Ledger Sync is a Java-based application designed to provide efficient access to Cardano blockchain data"}),(0,l.jsx)("meta",{property:"og:description",content:"Ledger Sync is a Java-based application designed to provide efficient access to Cardano blockchain data"})]})};s.Z=n},5789:function(){}},function(e){e.O(0,[942,888,774,179],function(){return e(e.s=7553)}),_N_E=e.O()}]);