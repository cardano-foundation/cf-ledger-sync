(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[386],{6099:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/use-cases/WalletQueries/wallet12",function(){return r(7924)}])},7924:function(e,s,r){"use strict";r.r(s),r.d(s,{__toc:function(){return c}});var l=r(5893),t=r(2673),n=r(2169),o=r(2069);r(9488);var i=r(2643),a=r(2154);let c=[{depth:2,value:"12. Smart contract transaction data",id:"12-smart-contract-transaction-data"},{depth:3,value:"12.1 Transaction information",id:"121-transaction-information"},{depth:3,value:"Overall query structure",id:"overall-query-structure"},{depth:3,value:"Destination Addresses, the first SELECT",id:"destination-addresses-the-first-select"},{depth:3,value:"Source Addresses, the second SELECT",id:"source-addresses-the-second-select"},{depth:3,value:"Result returned",id:"result-returned"},{depth:3,value:"12.2 Contracts details",id:"122-contracts-details"},{depth:3,value:"Target transaction",id:"target-transaction"},{depth:3,value:"Redeemer details",id:"redeemer-details"},{depth:3,value:"Redeemer Data",id:"redeemer-data"},{depth:3,value:"Transaction input and output JOIN",id:"transaction-input-and-output-join"},{depth:3,value:"Datum information",id:"datum-information"},{depth:3,value:"Output",id:"output"},{depth:3,value:"12.3 Collateral input & output",id:"123-collateral-input--output"},{depth:3,value:"First SELECT",id:"first-select"},{depth:3,value:"Second SELECT",id:"second-select"},{depth:3,value:"UNION",id:"union"},{depth:3,value:"12.4 Reference input and contract reference",id:"124-reference-input-and-contract-reference"},{depth:3,value:"Query structure",id:"query-structure"},{depth:3,value:"Results",id:"results"}];function d(e){let s=Object.assign({h2:"h2",p:"p",code:"code",a:"a",h3:"h3",ul:"ul",li:"li",pre:"pre",span:"span",details:"details",summary:"summary",strong:"strong",em:"em"},(0,i.a)(),e.components);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.h2,{id:"12-smart-contract-transaction-data",children:"12. Smart contract transaction data"}),"\n",(0,l.jsxs)(s.p,{children:["For our final query, we will inspect the details of a specific transaction, namely, the transaction id ",(0,l.jsx)(s.code,{children:"52385f2dd6b69eb035474b529249afda132cde54f54c727842393edc51bebb57"}),". Note we are not modifying the blockchain in any way, we are just reading data from it."]}),"\n",(0,l.jsx)(a.UW,{type:"info",emoji:"\uD83D\uDCA1",children:(0,l.jsxs)(s.p,{children:["For most users, the wallet is their gateway when interacting with dApps (decentralized applications) on Cardano. There is even a ",(0,l.jsx)(s.a,{href:"https://cips.cardano.org/cip/CIP-30",children:"CIP-30"})," outlining a consistent standard for developers to follow. For example, when a user swaps a token on a dApp, the wallet securely signs the transaction, and this transaction typically triggers smart contract(s). Most smart contracts on Cardano are written in Aiken. To learn more, head over to ",(0,l.jsx)(s.a,{href:"https://aiken-lang.org/fundamentals/getting-started",children:"aiken-lang.org"})," where you will find some excellent primers and guides. Learn how Aiken's compiler and standard library enforce safe patterns to aid in secure code. Add to that a full-blown property test framework, you can be confident Aiken is fully equipped for high assurance."]})}),"\n",(0,l.jsxs)(s.p,{children:["\uD83D\uDD0E  As usual, you can also take a closer look using the ",(0,l.jsx)(s.a,{href:"https://beta.explorer.cardano.org/en/transaction/52385f2dd6b69eb035474b529249afda132cde54f54c727842393edc51bebb57/summary/",children:"Cardano Explorer"})]}),"\n",(0,l.jsx)(s.h3,{id:"121-transaction-information",children:"12.1 Transaction information"}),"\n",(0,l.jsx)(s.p,{children:"Let's start by retrieving the transaction details:"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"transaction hash"}),"\n",(0,l.jsx)(s.li,{children:"timestamp"}),"\n",(0,l.jsx)(s.li,{children:"block"}),"\n",(0,l.jsx)(s.li,{children:"fee"}),"\n",(0,l.jsx)(s.li,{children:"epoch"}),"\n",(0,l.jsx)(s.li,{children:"slot"}),"\n",(0,l.jsx)(s.li,{children:"source address"}),"\n",(0,l.jsx)(s.li,{children:"destination address"}),"\n",(0,l.jsx)(s.li,{children:"assets"}),"\n",(0,l.jsx)(s.li,{children:"amount"}),"\n",(0,l.jsx)(s.li,{children:"UTXOs used"}),"\n"]}),"\n",(0,l.jsx)(s.pre,{"data-language":"sql","data-theme":"default",children:(0,l.jsxs)(s.code,{"data-language":"sql","data-theme":"default",children:[(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"SELECT"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx_detail."}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"FROM"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ("})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"	"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"SELECT"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"		"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'destination_address'"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" direction,"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"		tx.hash "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" txhash,"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"		tx_out.address "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"address"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"		sa."}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"view"'}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" stake_address,"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"		tx_out.value "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ADA_amount,"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"		ma.name "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" asset_name,"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"		"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"sum"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(mto.quantity) "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" quantity,"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"		b.time "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" time_stamp,"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"		tx.fee "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" transaction_fee,"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"		b.block_no "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"block"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"		b.slot_no "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" slot,"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"		b.epoch_no "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" epoch,"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"		"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"NULL"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" utxo"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"	"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"FROM"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"		"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"LEFT JOIN"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx_out "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"ON"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx_out.tx_id "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx.id"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"		"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"LEFT JOIN"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" stake_address sa "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"ON"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" sa.id "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx_out.stake_address_id"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"		"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"LEFT JOIN"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ma_tx_out mto "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"ON"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" mto.tx_out_id "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx_out.id"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"		"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"LEFT JOIN"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" multi_asset ma "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"ON"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ma.id "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" mto.ident"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"		"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"LEFT JOIN"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"block"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" b "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"ON"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" b.id "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx.block_id"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"	"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"WHERE"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"		tx.hash "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'52385f2dd6b69eb035474b529249afda132cde54f54c727842393edc51bebb57'"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"	"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"GROUP BY"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" direction, txhash, "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"address"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", stake_address, ADA_amount, asset_name, time_stamp, transaction_fee, "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"block"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", slot, epoch, utxo"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"	"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"UNION ALL"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"		"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"SELECT"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"			"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'source_address'"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" direction,"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"			tx.hash "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" txhash,"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"			tx_out.address "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"address"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"			sa."}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"view"'}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" stake_address,				"})]}),"\n",(0,l.jsx)(s.span,{className:"line",children:(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"			tx_out.value ADA_amount,"})}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"			ma.name "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" asset_name,"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"			"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"sum"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(mto.quantity) "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" quantity,"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"			b.time "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" time_stamp,"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"			tx.fee "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" transaction_fee,"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"			b.block_no "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"block"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"			b.slot_no "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" slot,"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"			b.epoch_no "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" epoch,"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"			txin.hash "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" utxo"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"	"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"FROM"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"		"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"LEFT JOIN"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx_in ti "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"ON"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ti.tx_in_id "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx.id"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"		"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"LEFT JOIN"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx_out "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"ON"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx_out.tx_id "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ti.tx_out_id "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AND"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx_out."}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"index"'}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ti.tx_out_index "})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"		"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"LEFT JOIN"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx txin "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"ON"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" txin.id "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx_out.tx_id"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"		"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"LEFT JOIN"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" stake_address sa "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"ON"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" sa.id "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx_out.stake_address_id"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"		"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"LEFT JOIN"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ma_tx_out mto "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"ON"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" mto.tx_out_id "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx_out.id"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"		"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"LEFT JOIN"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" multi_asset ma "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"ON"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ma.id "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" mto.ident"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"		"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"LEFT JOIN"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"block"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" b "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"ON"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" b.id "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx.block_id"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"	"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"WHERE"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"		tx.hash "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'52385f2dd6b69eb035474b529249afda132cde54f54c727842393edc51bebb57'"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"			"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"	"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"GROUP BY"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" direction, txhash, "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"address"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", stake_address, ADA_amount, asset_name, time_stamp, transaction_fee, "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"block"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", slot, epoch, utxo"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"				) "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx_detail"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"	"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"ORDER BY"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx_detail.direction "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"ASC"})]})]})}),"\n",(0,l.jsxs)(s.details,{children:[(0,l.jsx)(s.summary,{children:(0,l.jsx)(s.p,{children:"Expected results format"})}),(0,l.jsx)(s.pre,{"data-language":"sql","data-theme":"default",children:(0,l.jsxs)(s.code,{"data-language":"sql","data-theme":"default",children:[(0,l.jsx)(s.span,{className:"line",children:" "}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"direction           |  txhash            |  "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"address"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"              | stake_address              |ada_amount|asset_name|quantity|time_stamp	     |tx_fee |"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"block"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"     | slot      |epoch|utxo"})]}),"\n",(0,l.jsx)(s.span,{className:"line",children:(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"--------------------+--------------------+-----------------------+----------------------------+----------+----------+--------+-------------------+------------------+-----------+-----+----------"})}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"destination_address | 52385f2dd....ebb57 |addr1q94ga....grqd9dw0d|stake1u9d9...sapektypsmfx9qr|"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"20"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"000"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"000"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"|          |        |"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"2024"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"07"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"13"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"15"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:":"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"33"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:":"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"54"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"|"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"395"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"771"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"|"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"10"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"568"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"064"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"|"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"129"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"318"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"543"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"| "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"496"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" | 	 "})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"source_address      | 52385f2dd....ebb57 |addr1qyvl8....vgsyxh7q9|stake1uxw4...8f43pxkyg5842yn|"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"33"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"080"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"297"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"|          |        |"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"2024"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"07"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"13"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"15"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:":"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"33"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:":"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"54"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"|"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"395"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"771"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"|"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"10"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"568"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"064"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"|"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"129"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"318"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"543"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"| "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"496"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" |9d8...57a"})]}),"\n",(0,l.jsx)(s.span,{className:"line",children:" "}),"\n",(0,l.jsx)(s.span,{className:"line",children:" "}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(Note: full results trimmed "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"for"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" readability)"})]})]})})]}),"\n",(0,l.jsx)(s.p,{children:"\uD83D\uDD0E Let's zoom in to see what the query does step-by-step:"}),"\n",(0,l.jsxs)(a.Rg,{children:[(0,l.jsx)(s.h3,{id:"overall-query-structure",children:"Overall query structure"}),(0,l.jsx)(s.p,{children:"To find the information we need, the query focuses on two perspectives:"}),(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Destination Addresses:"})," Where did the funds/assets end up?"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Source Addresses:"})," Where did the funds/assets come from?"]}),"\n"]}),(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.code,{children:"UNION ALL"})," combines the results from the two separate ",(0,l.jsx)(s.code,{children:"SELECT"})," statements. Each ",(0,l.jsx)(s.code,{children:"SELECT"})," statement targets one of the perspectives above."]}),(0,l.jsxs)(s.h3,{id:"destination-addresses-the-first-select",children:["Destination Addresses, the first ",(0,l.jsx)(s.code,{children:"SELECT"})]}),(0,l.jsxs)(s.p,{children:["It fetches details about the outputs ",(0,l.jsx)(s.a,{href:"https://github.com/cardano-foundation/cf-ledger-sync/blob/main/docs/pages/schema.md#tx_out",children:"tx_out"})," of the transaction. It then links to other tables to fetch further information such as:"]}),(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"Stake address associated with the output"}),"\n",(0,l.jsx)(s.li,{children:"Asset names and quantities"}),"\n",(0,l.jsx)(s.li,{children:"Block, slot, and epoch details of the transaction"}),"\n",(0,l.jsx)(s.li,{children:"Transaction fee"}),"\n"]}),(0,l.jsxs)(s.h3,{id:"source-addresses-the-second-select",children:["Source Addresses, the second ",(0,l.jsx)(s.code,{children:"SELECT"})]}),(0,l.jsxs)(s.p,{children:["This ",(0,l.jsx)(s.code,{children:"SELECT"})," statement looks back to the inputs ",(0,l.jsx)(s.a,{href:"https://github.com/cardano-foundation/cf-ledger-sync/blob/main/docs/pages/schema.md#tx_in",children:"tx_in"})," of the transaction. It traces the chain of transactions to find the original outputs ",(0,l.jsx)(s.a,{href:"https://github.com/cardano-foundation/cf-ledger-sync/blob/main/docs/pages/schema.md#tx_out",children:"tx_out"})," that were spent as inputs in this transaction. It retrieves similar information as the first ",(0,l.jsx)(s.code,{children:"SELECT"}),", but additionally includes the 'utxo' (unspent transaction output) hash which represents the specific output that was spent."]}),(0,l.jsx)(s.h3,{id:"result-returned",children:"Result returned"}),(0,l.jsxs)(s.p,{children:["The two result sets are combined with a ",(0,l.jsx)(s.code,{children:"UNION ALL"})," clause, and the final output is sorted by ",(0,l.jsx)(s.code,{children:"direction"})," so that ",(0,l.jsx)(s.code,{children:"destination_address"})," rows appear before ",(0,l.jsx)(s.code,{children:"source_address"})," rows in the results."]})]}),"\n",(0,l.jsx)(s.h3,{id:"122-contracts-details",children:"12.2 Contracts details"}),"\n",(0,l.jsxs)(s.p,{children:["For this query, we are looking for the Redeemer, datum hash and datum associated with the transaction. A good recap on there terms is available on ",(0,l.jsx)(s.a,{href:"https://aiken-lang.org/fundamentals/eutxo",children:"Aiken-lang.org"}),"."]}),"\n",(0,l.jsx)(s.pre,{"data-language":"sql","data-theme":"default",children:(0,l.jsxs)(s.code,{"data-language":"sql","data-theme":"default",children:[(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"SELECT"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"	re.script_hash "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" scriptHash, "})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"	txOut.address "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"address"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", "})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"	re.purpose "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"as"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" purpose,"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        encode(rd.bytes, "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'hex'"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:") "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"as"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" redeemerData, "})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        re.unit_mem "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"as"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" redeemerMem, "})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        re.unit_steps "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"as"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" redeemerSteps,"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        d.hash "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"as"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" datumHash, "})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        encode(d.bytes, "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'hex'"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:") "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"as"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" datum"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"           "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"FROM"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"           "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"INNER JOIN"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" redeemer re "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"ON"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" re.tx_id "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx.id "})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"           "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"LEFT JOIN"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" redeemer_data rd "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"ON"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" re.redeemer_data_id "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" rd.id "})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"           "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"LEFT JOIN"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx_in txIn "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"ON"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" (txIn.redeemer_id "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" re.id "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"and"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" txIn.tx_in_id "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx.id)"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"           "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"LEFT JOIN"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx_out txOut "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"ON"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" txIn.tx_out_id "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" txOut.tx_id "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AND"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" txIn.tx_out_index "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" txOut.index"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"           "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"LEFT JOIN"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" datum d "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"ON"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" (txOut.data_hash "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" d.hash "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"OR"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" txOut.inline_datum_id "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" d.id)"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"           "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"WHERE"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx.hash "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'52385f2dd6b69eb035474b529249afda132cde54f54c727842393edc51bebb57'"})]})]})}),"\n",(0,l.jsxs)(s.details,{children:[(0,l.jsx)(s.summary,{children:(0,l.jsx)(s.p,{children:"Expected results format"})}),(0,l.jsx)(s.pre,{"data-language":"sql","data-theme":"default",children:(0,l.jsxs)(s.code,{"data-language":"sql","data-theme":"default",children:[(0,l.jsx)(s.span,{className:"line",children:" "}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"scripthash    | "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"address"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      |purpose|redeemerbytes| redeemermem| redeemersteps	 | datumhash         | datumbytes"})]}),"\n",(0,l.jsx)(s.span,{className:"line",children:(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"--------------+--------------+-------+-------------+------------+----------------+-------------------+------------------------"})}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"9068"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"...ce138ad|addr1zx...5plm|spend  |d87a80       | "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"2"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"463"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"014"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  |  "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"689"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"900"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"093"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"	 | 3c27703297...1fce | d8799f581c...00ffffffff"})]}),"\n",(0,l.jsx)(s.span,{className:"line",children:" "}),"\n",(0,l.jsx)(s.span,{className:"line",children:" "}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(Note: full results trimmed "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"for"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" readability)"})]})]})})]}),"\n",(0,l.jsx)(s.p,{children:"\uD83D\uDD0E Let's zoom in to see what the query does step-by-step:"}),"\n",(0,l.jsxs)(a.Rg,{children:[(0,l.jsx)(s.h3,{id:"target-transaction",children:"Target transaction"}),(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.code,{children:"WHERE tx.hash = '...'"})," filters to the specific transaction we are interested in."]}),(0,l.jsx)(s.h3,{id:"redeemer-details",children:"Redeemer details"}),(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.code,{children:"INNER JOIN redeemer re ON re.tx_id = tx.id"})," ensures we only consider redeemers associated with the target transaction. ",(0,l.jsx)(s.code,{children:"re.script_hash"}),", ",(0,l.jsx)(s.code,{children:"re.purpose"}),", ",(0,l.jsx)(s.code,{children:"re.unit_mem"}),", ",(0,l.jsx)(s.code,{children:"re.unit_steps"})," fetch the script hash the redeemer interacts with, its purpose, memory usage, and computational steps, respectively."]}),(0,l.jsx)(s.h3,{id:"redeemer-data",children:"Redeemer Data"}),(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.code,{children:"LEFT JOIN redeemer_data rd ON re.redeemer_data_id = rd.id"})," brings in redeemer data if it exists. ",(0,l.jsx)(s.code,{children:"encode(rd.bytes, 'hex') as redeemerData"})," converts the raw redeemer data into a human-readable hexadecimal format."]}),(0,l.jsx)(s.h3,{id:"transaction-input-and-output-join",children:"Transaction input and output JOIN"}),(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.code,{children:"LEFT JOIN tx_in txIn ON ..."})," joins the transaction input that triggered the redeemer to the transaction itself. ",(0,l.jsx)(s.code,{children:"LEFT JOIN tx_out txOut ON ..."})," links this input with the specific transaction output it spends from. ",(0,l.jsx)(s.code,{children:"txOut.address"})," extracts the address of the output being spent."]}),(0,l.jsx)(s.h3,{id:"datum-information",children:"Datum information"}),(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.code,{children:"LEFT JOIN datum d ON ..."})," attempts to find a datum linked to the spent output, either through a hash reference or an inline datum.\n",(0,l.jsx)(s.code,{children:"d.hash"})," and ",(0,l.jsx)(s.code,{children:"encode(d.bytes, 'hex') as datum"})," provide the datum hash and its hexadecimal representation."]}),(0,l.jsx)(s.h3,{id:"output",children:"Output"}),(0,l.jsx)(s.p,{children:"The query will produce a result set containing:"}),(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"scriptHash"})," ...the script hash the redeemer interacts with."]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"address"}),"...the address of the UTxO spent by the transaction input."]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"purpose"}),"...the purpose of the redeemer"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"redeemerData"}),"...the Hex-encoded redeemer data (if present)."]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"redeemerMem"})," & ",(0,l.jsx)(s.code,{children:"redeemerSteps"}),"...the redeemer's memory & computational step usage."]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"datumHash"}),"...the hash of the datum associated with the spent output."]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"datum"})," ...the hex-encoded datum content (if present)."]}),"\n"]})]}),"\n",(0,l.jsx)(a.UW,{type:"info",emoji:"\uD83D\uDCA1",children:(0,l.jsxs)(s.p,{children:["Remember you can also review the results in any Cardano explorer.  The ",(0,l.jsx)(s.em,{children:"Cardano Developer Portal"})," has compiled a ",(0,l.jsx)(s.a,{href:"https://developers.cardano.org/showcase/?tags=explorer",children:"list"})," in their 'Showcase' section. For example, you can review review the results of Queries 12.1 and 12.2 at ",(0,l.jsx)(s.a,{href:"https://cardanoscan.io/transaction/52385f2dd6b69eb035474b529249afda132cde54f54c727842393edc51bebb57?tab=utxo",children:"this link"})," \uD83D\uDD0E"]})}),"\n",(0,l.jsx)(s.h3,{id:"123-collateral-input--output",children:"12.3 Collateral input & output"}),"\n",(0,l.jsxs)(s.p,{children:["The collateral mechanism is an important feature that has been designed to ensure successful smart contract execution. You can read more about it in the ",(0,l.jsx)(s.a,{href:"https://docs.cardano.org/about-cardano/learn/collateral-mechanism/",children:"documentation"}),"."]}),"\n",(0,l.jsxs)(s.p,{children:["This query retrieves information about the inputs and outputs associated with our transaction, identified by its hash ",(0,l.jsx)(s.code,{children:"52385f2dd6b69eb035474b529249afda132cde54f54c727842393edc51bebb57"}),". The inputs and outputs are categorized in the results in the 'collateral' column."]}),"\n",(0,l.jsx)(s.pre,{"data-language":"sql","data-theme":"default",children:(0,l.jsxs)(s.code,{"data-language":"sql","data-theme":"default",children:[(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"	   "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"SELECT"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"		"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'input'"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" collateral,"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"	       	txOut.address "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"address"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", "})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"             	txOut.value "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"value"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"             	txOut.index "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"index"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"           "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"FROM"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" unconsume_tx_in cti "})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"           "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"INNER JOIN"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx_out txOut "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"on"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" txOut.tx_id "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" cti.tx_out_id "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"and"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" txOut.index "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" cti.tx_out_index "})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"           "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"LEFT JOIN"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"ON"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" cti.tx_in_id "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx.id "})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"           "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"JOIN"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx txin "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"ON"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" cti.tx_out_id "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" txin.id "})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"           "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"WHERE"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"		tx.hash  "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'52385f2dd6b69eb035474b529249afda132cde54f54c727842393edc51bebb57'"})]}),"\n",(0,l.jsx)(s.span,{className:"line",children:(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"           "})}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"           "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"UNION"})]}),"\n",(0,l.jsx)(s.span,{className:"line",children:(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"          "})}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"           "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"SELECT"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"		   "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'output'"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" collateral,"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"	           failedTxOut.address "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"address"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", "})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"	           failedTxOut.value "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"value"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"	           failedTxOut.index "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"index"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"           "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"FROM"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" failed_tx_out failedTxOut "})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"           "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"INNER JOIN"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"ON"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" failedTxOut.tx_id "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx.id"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"           "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"WHERE"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx.hash "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'52385f2dd6b69eb035474b529249afda132cde54f54c727842393edc51bebb57'"})]})]})}),"\n",(0,l.jsxs)(s.details,{children:[(0,l.jsx)(s.summary,{children:(0,l.jsx)(s.p,{children:"Expected results format"})}),(0,l.jsx)(s.pre,{"data-language":"sql","data-theme":"default",children:(0,l.jsxs)(s.code,{"data-language":"sql","data-theme":"default",children:[(0,l.jsx)(s.span,{className:"line",children:" "}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"collateral | "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"address"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      											    											 |"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"value"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"       |"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"index"})]}),"\n",(0,l.jsx)(s.span,{className:"line",children:(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"-----------+---------------------------------------------------------------------------------------------------------+------------+-----"})}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"input      | addr1qyvl8lmwpfq7pahuadpjwul9xlj7c0atr5hvu4r3cjsjlfua276aqezvwjsfucvq76welxmytfyt7ug5835wntzzdvgsyxh7q9 | "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"33"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"080"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"297"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" | "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"0"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"output"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"     | addr1qyvl8lmwpfq7pahuadpjwul9xlj7c0atr5hvu4r3cjsjlfua276aqezvwjsfucvq76welxmytfyt7ug5835wntzzdvgsyxh7q9 | "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"32"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"486"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"640"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" | "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"5"})]}),"\n",(0,l.jsx)(s.span,{className:"line",children:" "})]})})]}),"\n",(0,l.jsx)(s.p,{children:"\uD83D\uDD0E Let's zoom in to see what the query does step-by-step:"}),"\n",(0,l.jsxs)(a.Rg,{children:[(0,l.jsxs)(s.h3,{id:"first-select",children:["First ",(0,l.jsx)(s.code,{children:"SELECT"})]}),(0,l.jsxs)(s.p,{children:["The ",(0,l.jsx)(s.code,{children:"FROM unconsume_tx_in cti"})," clause starts by looking at unspent transaction outputs (UTXOs) that have been used as inputs in some other transaction. The ",(0,l.jsx)(s.code,{children:"INNER JOIN tx_out txOut ..."})," joins with the ",(0,l.jsx)(s.a,{href:"https://github.com/cardano-foundation/cf-ledger-sync/blob/main/docs/pages/schema.md#tx_out",children:"tx_out"})," table to get details about these UTXOs, ie. address, value, index within the transaction."]}),(0,l.jsxs)(s.p,{children:["The ",(0,l.jsx)(s.code,{children:"LEFT JOIN tx ON ..."})," attempts to join with the ",(0,l.jsx)(s.a,{href:"https://github.com/cardano-foundation/cf-ledger-sync/blob/main/docs/pages/schema.md#tx",children:"tx"})," table to see if there's a transaction where this UTXO was used as an input."]}),(0,l.jsxs)(s.p,{children:["The ",(0,l.jsx)(s.code,{children:"JOIN tx txin ON ..."})," clause also joins with the ",(0,l.jsx)(s.a,{href:"https://github.com/cardano-foundation/cf-ledger-sync/blob/main/docs/pages/schema.md#tx",children:"tx"})," table again (alias ",(0,l.jsx)(s.code,{children:"txin"}),") to get details about the transaction where this UTXO was originally created as an output."]}),(0,l.jsxs)(s.p,{children:["The ",(0,l.jsx)(s.code,{children:"WHERE tx.hash = ..."})," clause filters the results to only include UTXOs that were used as inputs in the specific transaction we specified. The ",(0,l.jsx)(s.code,{children:"'input' AS collateral"})," clause labels these results as 'input' in the ",(0,l.jsx)(s.code,{children:"collateral"})," column."]}),(0,l.jsxs)(s.h3,{id:"second-select",children:["Second ",(0,l.jsx)(s.code,{children:"SELECT"})]}),(0,l.jsxs)(s.p,{children:["The ",(0,l.jsx)(s.code,{children:"FROM failed_tx_out failedTxOut"})," looks at outputs from transactions that failed. The ",(0,l.jsx)(s.code,{children:"INNER JOIN tx ON ..."})," clause joins with the ",(0,l.jsx)(s.a,{href:"https://github.com/cardano-foundation/cf-ledger-sync/blob/main/docs/pages/schema.md#tx",children:"tx"})," table to get details about the failed transaction."]}),(0,l.jsxs)(s.p,{children:["The ",(0,l.jsx)(s.code,{children:"WHERE tx.hash = ..."})," clause filters the results to only include outputs from the specific failed transaction we're interested in. The ",(0,l.jsx)(s.code,{children:"'output' AS collateral"})," clause labels these results as 'output' in the ",(0,l.jsx)(s.code,{children:"collateral"})," column."]}),(0,l.jsx)(s.h3,{id:"union",children:(0,l.jsx)(s.code,{children:"UNION"})}),(0,l.jsxs)(s.p,{children:["The ",(0,l.jsx)(s.code,{children:"UNION"})," clause combines the results from the two parts into a single result set:"]}),(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"collateral"})," indicates whether the row represents a transaction input or an output"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"address"})," ...ie, the address associated with the input or output"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"value"})," is the amount of ADA (or other assets) associated with the input or output"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"index"})," tells us the position of the input or output within its transaction"]}),"\n"]})]}),"\n",(0,l.jsx)(s.h3,{id:"124-reference-input-and-contract-reference",children:"12.4 Reference input and contract reference"}),"\n",(0,l.jsxs)(s.p,{children:["Our final query aims to retrieve details about the outputs (UTXOs) that were ",(0,l.jsx)(s.strong,{children:"spent"})," as inputs in our specific transaction, identified by its hash ",(0,l.jsx)(s.code,{children:"52385f2dd6b69eb035474b529249afda132cde54f54c727842393edc51bebb57"}),"."]}),"\n",(0,l.jsx)(s.pre,{"data-language":"sql","data-theme":"default",children:(0,l.jsxs)(s.code,{"data-language":"sql","data-theme":"default",children:[(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"	  "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"SELECT"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  		txOut.address "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"as"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"address"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"     		tx.hash "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"as"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" txHash, "})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      		txOut.value "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"as"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"value"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", "})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      		r.tx_out_index "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"as"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"index"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"           "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"FROM"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" reference_tx_in r"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"           "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"JOIN"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx_out txOut "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"ON"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" r.tx_out_id "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" txOut.tx_id "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AND"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" txOut.index "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" r.tx_out_index"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"           "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"JOIN"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"ON"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" txOut.tx_id "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx.id "})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"	   "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"JOIN"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx txin "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"ON"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" txin.id "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" r.tx_in_id "})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"           "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"WHERE"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"		txin.hash "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'52385f2dd6b69eb035474b529249afda132cde54f54c727842393edc51bebb57'"})]})]})}),"\n",(0,l.jsxs)(s.details,{children:[(0,l.jsx)(s.summary,{children:(0,l.jsx)(s.p,{children:"Expected results format"})}),(0,l.jsx)(s.pre,{"data-language":"sql","data-theme":"default",children:(0,l.jsxs)(s.code,{"data-language":"sql","data-theme":"default",children:[(0,l.jsx)(s.span,{className:"line",children:" "}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"address"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" 								 	                        									| txhash      			|"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"value"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"       |"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"index"})]}),"\n",(0,l.jsx)(s.span,{className:"line",children:(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"--------------------------------------------------------------------------------------------------------+-----------------------+------------+-----"})}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"addr1zxgx3far7qygq0k6epa0zcvcvrevmn0ypsnfsue94nsn3tvpw288a4x0xf8pxgcntelxmyclq83s0ykeehchz2wtspks905plm	| 9a3245....b0fc1d06f5b | "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"40"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"000"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"000"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" | "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"0"})]}),"\n",(0,l.jsx)(s.span,{className:"line",children:" "}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(Note:  results abbreviated "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"for"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" readability)"})]}),"\n",(0,l.jsx)(s.span,{className:"line",children:" "})]})})]}),"\n",(0,l.jsx)(s.p,{children:"\uD83D\uDD0E Let's zoom in to see what the query does step-by-step:"}),"\n",(0,l.jsxs)(a.Rg,{children:[(0,l.jsx)(s.h3,{id:"query-structure",children:"Query structure"}),(0,l.jsxs)(s.p,{children:["The ",(0,l.jsx)(s.code,{children:"FROM reference_tx_in r"})," starts by looking at the ",(0,l.jsx)(s.a,{href:"https://github.com/cardano-foundation/cf-ledger-sync/blob/main/docs/pages/schema.md#reference_tx_in",children:"reference_tx_in"})," table, which stores information about transaction inputs and the UTXOs they reference."]}),(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.code,{children:"JOIN tx_out txOut ON ..."}),"  joins with the ",(0,l.jsx)(s.a,{href:"https://github.com/cardano-foundation/cf-ledger-sync/blob/main/docs/pages/schema.md#tx_out",children:"tx_out"})," table to get details about these UTXOs, ie. address, value, index within the transaction."]}),(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.code,{children:"JOIN tx ON txOut.tx_id = tx.id"})," joins with the ",(0,l.jsx)(s.a,{href:"https://github.com/cardano-foundation/cf-ledger-sync/blob/main/docs/pages/schema.md#tx",children:"tx"})," table to get information about the transaction where these UTXOs were created as outputs."]}),(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.code,{children:"JOIN tx txin ON txin.id = r.tx_in_id"})," joins with the ",(0,l.jsx)(s.a,{href:"https://github.com/cardano-foundation/cf-ledger-sync/blob/main/docs/pages/schema.md#tx",children:"tx"})," table again (aliase ",(0,l.jsx)(s.code,{children:"txin"}),") to get details about the transaction where these UTXOs were spent as inputs."]}),(0,l.jsxs)(s.p,{children:["The ",(0,l.jsx)(s.code,{children:"WHERE txin.hash = ..."})," clause filters the results to only include UTXOs that were spent as inputs in the specific transaction we're interested in."]}),(0,l.jsx)(s.h3,{id:"results",children:"Results"}),(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"address"})," is the address associated with the spent UTXO"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"txHash"})," is the hash of the transaction where this UTXO was created as an output"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"value"})," is the amount of ADA (or other assets) associated with the spent UTXO"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"index"})," is the position of the UTXO within the transaction where it was created"]}),"\n"]})]})]})}let h={MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,i.a)(),e.components);return s?(0,l.jsx)(s,{...e,children:(0,l.jsx)(d,{...e})}):d(e)},pageOpts:{filePath:"pages/use-cases/WalletQueries/wallet12.mdx",route:"/use-cases/WalletQueries/wallet12",timestamp:1726129223e3,pageMap:[{kind:"Meta",data:{index:"Overview",design:"Design",docker:"Run with Docker Compose",schema:"Schema",build_run:"Build & Run",applications:{title:"Applications"},"use-cases":{title:"Use Cases"},about:{title:"About",type:"page"}}},{kind:"MdxPage",name:"about",route:"/about"},{kind:"Folder",name:"applications",route:"/applications",children:[{kind:"Meta",data:{ledger_sync_app:"Ledger Sync",streamer_app:"Ledger Sync Streamer"}},{kind:"MdxPage",name:"ledger_sync_app",route:"/applications/ledger_sync_app"},{kind:"MdxPage",name:"streamer_app",route:"/applications/streamer_app"}]},{kind:"MdxPage",name:"build_run",route:"/build_run"},{kind:"MdxPage",name:"design",route:"/design"},{kind:"MdxPage",name:"docker",route:"/docker"},{kind:"MdxPage",name:"index",route:"/"},{kind:"MdxPage",name:"schema",route:"/schema"},{kind:"Folder",name:"use-cases",route:"/use-cases",children:[{kind:"Folder",name:"WalletQueries",route:"/use-cases/WalletQueries",children:[{kind:"Meta",data:{wallet01:"Find the ADA balance of a wallet",wallet02:"List a balance's UTXOs",wallet03:"Review wallet transaction history",wallet04:"List all tokens in a wallet",wallet05:"Query collection details",wallet06:"Query Token metadata",wallet07:"Query Active Stake Pools",wallet08:"Query Stake Pool details",wallet09:"Stake pool lifetime blocks",wallet10:"List current dReps",wallet11:"Find Active Governance Proposals",wallet12:"Smart contract transaction data"}},{kind:"MdxPage",name:"wallet01",route:"/use-cases/WalletQueries/wallet01"},{kind:"MdxPage",name:"wallet02",route:"/use-cases/WalletQueries/wallet02"},{kind:"MdxPage",name:"wallet03",route:"/use-cases/WalletQueries/wallet03"},{kind:"MdxPage",name:"wallet04",route:"/use-cases/WalletQueries/wallet04"},{kind:"MdxPage",name:"wallet05",route:"/use-cases/WalletQueries/wallet05"},{kind:"MdxPage",name:"wallet06",route:"/use-cases/WalletQueries/wallet06"},{kind:"MdxPage",name:"wallet07",route:"/use-cases/WalletQueries/wallet07"},{kind:"MdxPage",name:"wallet08",route:"/use-cases/WalletQueries/wallet08"},{kind:"MdxPage",name:"wallet09",route:"/use-cases/WalletQueries/wallet09"},{kind:"MdxPage",name:"wallet10",route:"/use-cases/WalletQueries/wallet10"},{kind:"MdxPage",name:"wallet11",route:"/use-cases/WalletQueries/wallet11"},{kind:"MdxPage",name:"wallet12",route:"/use-cases/WalletQueries/wallet12"}]},{kind:"MdxPage",name:"WalletQueries",route:"/use-cases/WalletQueries"},{kind:"Meta",data:{WalletQueries:"Wallet queries",nftqueries:"NFT marketplace"}},{kind:"Folder",name:"nftqueries",route:"/use-cases/nftqueries",children:[{kind:"Meta",data:{nft1:"View Collections",nft2:"View NFT collection details",nft3:"View all assets",nft4:"Minting an NFT",nft5:"Selling an NFT",nft6:"Buying an NFT"}},{kind:"MdxPage",name:"nft1",route:"/use-cases/nftqueries/nft1"},{kind:"MdxPage",name:"nft2",route:"/use-cases/nftqueries/nft2"},{kind:"MdxPage",name:"nft3",route:"/use-cases/nftqueries/nft3"},{kind:"MdxPage",name:"nft4",route:"/use-cases/nftqueries/nft4"},{kind:"MdxPage",name:"nft5",route:"/use-cases/nftqueries/nft5"},{kind:"MdxPage",name:"nft6",route:"/use-cases/nftqueries/nft6"}]},{kind:"MdxPage",name:"nftqueries",route:"/use-cases/nftqueries"}]},{kind:"MdxPage",name:"use-cases",route:"/use-cases"}],flexsearch:{codeblocks:!0},title:"Wallet12",headings:c},pageNextRoute:"/use-cases/WalletQueries/wallet12",nextraLayout:n.ZP,themeConfig:o.Z};s.default=(0,t.j)(h)},2069:function(e,s,r){"use strict";var l=r(5893);r(7294);let t={logo:(0,l.jsx)("span",{children:(0,l.jsx)("b",{children:"Ledger Sync"})}),project:{link:"https://github.com/cardano-foundation/cf-ledger-sync"},chat:{link:"https://discord.gg/jw3yeYJw"},docsRepositoryBase:"https://github.com/cardano-foundation/cf-ledger-sync",footer:{text:"Ledger Sync project"},useNextSeoProps:()=>({titleTemplate:"%s  Ledger Sync"}),head:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("meta",{property:"description",content:"Ledger Sync is a Java-based application designed to provide efficient access to Cardano blockchain data"}),(0,l.jsx)("meta",{property:"og:title",content:"Ledger Sync is a Java-based application designed to provide efficient access to Cardano blockchain data"}),(0,l.jsx)("meta",{property:"og:description",content:"Ledger Sync is a Java-based application designed to provide efficient access to Cardano blockchain data"})]})};s.Z=t},5789:function(){}},function(e){e.O(0,[942,888,774,179],function(){return e(e.s=6099)}),_N_E=e.O()}]);