(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[859],{680:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/use-cases/WalletQueries/wallet09",function(){return a(2941)}])},2941:function(e,s,a){"use strict";a.r(s),a.d(s,{__toc:function(){return c}});var l=a(5893),t=a(2673),o=a(2169),n=a(2069);a(9488);var i=a(2643),r=a(2154);let c=[{depth:2,value:"9. Stake pool lifetime blocks",id:"9-stake-pool-lifetime-blocks"},{depth:3,value:"'SELECT'ing the right info",id:"selecting-the-right-info"},{depth:3,value:"FROM pool_hash ph",id:"from-pool_hash-ph"},{depth:3,value:"JOIN slot_leader sl ON sl.pool_hash_id = ph.id",id:"join-slot_leader-sl-on-slpool_hash_id--phid"},{depth:3,value:"JOIN block bk ON bk.slot_leader_id = sl.id",id:"join-block-bk-on-bkslot_leader_id--slid"},{depth:3,value:"WHERE ph.view = 'pool12dd0mg935mzx6rdaykngqj8aeqxrtjltg5jtdccrt7p0x78rc38'",id:"where-phview--pool12dd0mg935mzx6rdaykngqj8aeqxrtjltg5jtdccrt7p0x78rc38"},{depth:3,value:"Summary",id:"summary"}];function d(e){let s=Object.assign({h2:"h2",p:"p",pre:"pre",code:"code",span:"span",details:"details",summary:"summary",h3:"h3",ul:"ul",li:"li",a:"a"},(0,i.a)(),e.components);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.h2,{id:"9-stake-pool-lifetime-blocks",children:"9. Stake pool lifetime blocks"}),"\n",(0,l.jsx)(s.p,{children:'The "Lifetime Blocks" of a stake pool refers to the total number of blocks that the stake pool has successfully produced over its entire operational history. This metric provides insight into the pool\'s performance and reliability, reflecting its ability to contribute to the Cardano blockchain by creating blocks. Here is how you can fetch this information.'}),"\n",(0,l.jsx)(s.pre,{"data-language":"sql","data-theme":"default",children:(0,l.jsxs)(s.code,{"data-language":"sql","data-theme":"default",children:[(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"SELECT"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ph.view , bk.hash "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"as"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" block_hash, bk.epoch_no, "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"ROW_NUMBER"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"() "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"OVER"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ("}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"ORDER BY"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" bk.epoch_no)"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"FROM"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" pool_hash ph"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"JOIN"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" slot_leader sl "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"ON"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" sl.pool_hash_id "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ph.id"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"JOIN"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"block"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" bk "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"ON"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" bk.slot_leader_id "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" sl.id"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"WHERE"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ph.view "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'pool12dd0mg935mzx6rdaykngqj8aeqxrtjltg5jtdccrt7p0x78rc38'"})]})]})}),"\n",(0,l.jsxs)(s.details,{children:[(0,l.jsx)(s.summary,{children:(0,l.jsx)(s.p,{children:"Expected results format"})}),(0,l.jsx)(s.pre,{"data-language":"sql","data-theme":"default",children:(0,l.jsxs)(s.code,{"data-language":"sql","data-theme":"default",children:[(0,l.jsx)(s.span,{className:"line",children:" "}),"\n",(0,l.jsx)(s.span,{className:"line",children:(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"     view                                                |      block_hash		                                             |  epoch_no |  epoch_no "})}),"\n",(0,l.jsx)(s.span,{className:"line",children:(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"---------------------------------------------------------+-------------------------------------------------------------------+-----------+---------- "})}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"pool12dd0mg935mzx6rdaykngqj8aeqxrtjltg5jtdccrt7p0x78rc38 |  0244d69ef4149a38b4e717c64ff31af199b4e48d187766a7ef2163ac980ddb49 |   "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"121"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"     |   "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"              "})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"pool12dd0mg935mzx6rdaykngqj8aeqxrtjltg5jtdccrt7p0x78rc38 |  79bada15eb17f192e3bca7d57d8137d57f724f5ea937581bfdecae6af5ba6701 |   "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"121"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"	 |   "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"2"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"pool12dd0mg935mzx6rdaykngqj8aeqxrtjltg5jtdccrt7p0x78rc38 |  47fc8af17dd11b0d8ea83ce61548f8309df11585a4ef2de622a2538b84350d6a |   "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"121"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"	 |   "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"3"})]}),"\n",(0,l.jsx)(s.span,{className:"line",children:(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"   ............"})}),"\n",(0,l.jsx)(s.span,{className:"line",children:" "}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(Note: full results trimmed "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"for"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" readability)"})]})]})})]}),"\n",(0,l.jsx)(s.p,{children:"In this SQL query, we retrieve information about blocks associated with a specific pool hash by joining multiple tables. Let's take a closer look at what the query does. \uD83D\uDD0E"}),"\n",(0,l.jsxs)(r.Rg,{children:[(0,l.jsx)(s.h3,{id:"selecting-the-right-info",children:"'SELECT'ing the right info"}),(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.code,{children:"SELECT"})," clause retrieves the following data:"]}),(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"ph.view"})," selects the unique identifier, or 'view', of the stake pool."]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"bk.hash as block_hash"})," selects the unique hash identifier of each block."]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"bk.epoch_no"})," selects the epoch number in which the block was created."]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"ROW_NUMBER() OVER (ORDER BY bk.epoch_no)"})," assigns a sequential row number to each block, starting from 1, and then ordered chronologically by epoch number. This tracks the order in which the stake pool created blocks over time."]}),"\n"]}),(0,l.jsx)(s.h3,{id:"from-pool_hash-ph",children:"FROM pool_hash ph"}),(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["Looks in the table ",(0,l.jsx)(s.a,{href:"https://github.com/cardano-foundation/cf-ledger-sync/blob/main/docs/pages/schema.md#pool_hash",children:"pool_hash"}),", which stores information about stake pools, and assigns it the alias ",(0,l.jsx)(s.code,{children:"ph"}),"."]}),"\n"]}),(0,l.jsx)(s.h3,{id:"join-slot_leader-sl-on-slpool_hash_id--phid",children:"JOIN slot_leader sl ON sl.pool_hash_id = ph.id"}),(0,l.jsxs)(s.p,{children:["Joins the ",(0,l.jsx)(s.a,{href:"https://github.com/cardano-foundation/cf-ledger-sync/blob/main/docs/pages/schema.md#pool_hash",children:"pool_hash"})," table with the ",(0,l.jsx)(s.a,{href:"https://github.com/cardano-foundation/cf-ledger-sync/blob/main/docs/pages/schema.md#slot_leader",children:"slot_leader"})," table. The connection is made based on the matching ",(0,l.jsx)(s.code,{children:"id"})," from ",(0,l.jsx)(s.a,{href:"https://github.com/cardano-foundation/cf-ledger-sync/blob/main/docs/pages/schema.md#pool_hash",children:"pool_hash"})," and ",(0,l.jsx)(s.code,{children:"pool_hash_id"})," from ",(0,l.jsx)(s.a,{href:"https://github.com/cardano-foundation/cf-ledger-sync/blob/main/docs/pages/schema.md#slot_leader",children:"slot_leader"}),". The ",(0,l.jsx)(s.a,{href:"https://github.com/cardano-foundation/cf-ledger-sync/blob/main/docs/pages/schema.md#slot_leader",children:"slot_leader"})," table provides us with information about which stake pool was selected to lead a particular slot and potentially create a block."]}),(0,l.jsx)(s.h3,{id:"join-block-bk-on-bkslot_leader_id--slid",children:"JOIN block bk ON bk.slot_leader_id = sl.id"}),(0,l.jsxs)(s.p,{children:["Joins the result of the previous join with the ",(0,l.jsx)(s.a,{href:"https://github.com/cardano-foundation/cf-ledger-sync/blob/main/docs/pages/schema.md#block",children:"block"})," table. The connection is based on matching the ",(0,l.jsx)(s.code,{children:"id"})," from ",(0,l.jsx)(s.a,{href:"https://github.com/cardano-foundation/cf-ledger-sync/blob/main/docs/pages/schema.md#slot_leader",children:"slot_leader"})," with ",(0,l.jsx)(s.code,{children:"slot_leader_id"})," from ",(0,l.jsx)(s.a,{href:"https://github.com/cardano-foundation/cf-ledger-sync/blob/main/docs/pages/schema.md#block",children:"block"}),". The block table stores detailed information about each block on the blockchain."]}),(0,l.jsx)(s.h3,{id:"where-phview--pool12dd0mg935mzx6rdaykngqj8aeqxrtjltg5jtdccrt7p0x78rc38",children:"WHERE ph.view = 'pool12dd0mg935mzx6rdaykngqj8aeqxrtjltg5jtdccrt7p0x78rc38'"}),(0,l.jsx)(s.p,{children:"This `WHERE' clause restricts the results to only show blocks created by the stake pool with the specific view id we give the query."}),(0,l.jsx)(s.h3,{id:"summary",children:"Summary"}),(0,l.jsx)(s.p,{children:"The query returns a result set containing:"}),(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"The stake pool's view id."}),"\n",(0,l.jsx)(s.li,{children:"The unique hash of each block created by the stake pool."}),"\n",(0,l.jsx)(s.li,{children:"The epoch number of each block."}),"\n",(0,l.jsx)(s.li,{children:"A row number indicating the chronological order of block creation."}),"\n"]}),(0,l.jsxs)(s.p,{children:["\uD83D\uDD0E  You can also verify the details on one of many Cardano community explorers listed ",(0,l.jsx)(s.a,{href:"https://explorer.cardano.org/en/",children:"here"}),". For this one, lets use ",(0,l.jsx)(s.a,{href:"https://preprod.cardanoscan.io/pool/535afda0b1a6c46d0dbd25a68048fdc80c35cbeb4524b6e3035f82f3",children:"Cardanoscan"})," \uD83C\uDFAF"]})]})]})}let h={MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,i.a)(),e.components);return s?(0,l.jsx)(s,{...e,children:(0,l.jsx)(d,{...e})}):d(e)},pageOpts:{filePath:"pages/use-cases/WalletQueries/wallet09.mdx",route:"/use-cases/WalletQueries/wallet09",timestamp:1726129223e3,pageMap:[{kind:"Meta",data:{index:"Overview",design:"Design",docker:"Run with Docker Compose",schema:"Schema",build_run:"Build & Run",applications:{title:"Applications"},"use-cases":{title:"Use Cases"},about:{title:"About",type:"page"}}},{kind:"MdxPage",name:"about",route:"/about"},{kind:"Folder",name:"applications",route:"/applications",children:[{kind:"Meta",data:{ledger_sync_app:"Ledger Sync",streamer_app:"Ledger Sync Streamer"}},{kind:"MdxPage",name:"ledger_sync_app",route:"/applications/ledger_sync_app"},{kind:"MdxPage",name:"streamer_app",route:"/applications/streamer_app"}]},{kind:"MdxPage",name:"build_run",route:"/build_run"},{kind:"MdxPage",name:"design",route:"/design"},{kind:"MdxPage",name:"docker",route:"/docker"},{kind:"MdxPage",name:"index",route:"/"},{kind:"MdxPage",name:"schema",route:"/schema"},{kind:"Folder",name:"use-cases",route:"/use-cases",children:[{kind:"Folder",name:"WalletQueries",route:"/use-cases/WalletQueries",children:[{kind:"Meta",data:{wallet01:"Find the ADA balance of a wallet",wallet02:"List a balance's UTXOs",wallet03:"Review wallet transaction history",wallet04:"List all tokens in a wallet",wallet05:"Query collection details",wallet06:"Query Token metadata",wallet07:"Query Active Stake Pools",wallet08:"Query Stake Pool details",wallet09:"Stake pool lifetime blocks",wallet10:"List current dReps",wallet11:"Find Active Governance Proposals",wallet12:"Smart contract transaction data"}},{kind:"MdxPage",name:"wallet01",route:"/use-cases/WalletQueries/wallet01"},{kind:"MdxPage",name:"wallet02",route:"/use-cases/WalletQueries/wallet02"},{kind:"MdxPage",name:"wallet03",route:"/use-cases/WalletQueries/wallet03"},{kind:"MdxPage",name:"wallet04",route:"/use-cases/WalletQueries/wallet04"},{kind:"MdxPage",name:"wallet05",route:"/use-cases/WalletQueries/wallet05"},{kind:"MdxPage",name:"wallet06",route:"/use-cases/WalletQueries/wallet06"},{kind:"MdxPage",name:"wallet07",route:"/use-cases/WalletQueries/wallet07"},{kind:"MdxPage",name:"wallet08",route:"/use-cases/WalletQueries/wallet08"},{kind:"MdxPage",name:"wallet09",route:"/use-cases/WalletQueries/wallet09"},{kind:"MdxPage",name:"wallet10",route:"/use-cases/WalletQueries/wallet10"},{kind:"MdxPage",name:"wallet11",route:"/use-cases/WalletQueries/wallet11"},{kind:"MdxPage",name:"wallet12",route:"/use-cases/WalletQueries/wallet12"}]},{kind:"MdxPage",name:"WalletQueries",route:"/use-cases/WalletQueries"},{kind:"Meta",data:{WalletQueries:"Wallet queries",nftqueries:"NFT marketplace"}},{kind:"Folder",name:"nftqueries",route:"/use-cases/nftqueries",children:[{kind:"Meta",data:{nft1:"View Collections",nft2:"View NFT collection details",nft3:"View all assets",nft4:"Minting an NFT",nft5:"Selling an NFT",nft6:"Buying an NFT"}},{kind:"MdxPage",name:"nft1",route:"/use-cases/nftqueries/nft1"},{kind:"MdxPage",name:"nft2",route:"/use-cases/nftqueries/nft2"},{kind:"MdxPage",name:"nft3",route:"/use-cases/nftqueries/nft3"},{kind:"MdxPage",name:"nft4",route:"/use-cases/nftqueries/nft4"},{kind:"MdxPage",name:"nft5",route:"/use-cases/nftqueries/nft5"},{kind:"MdxPage",name:"nft6",route:"/use-cases/nftqueries/nft6"}]},{kind:"MdxPage",name:"nftqueries",route:"/use-cases/nftqueries"}]},{kind:"MdxPage",name:"use-cases",route:"/use-cases"}],flexsearch:{codeblocks:!0},title:"Wallet09",headings:c},pageNextRoute:"/use-cases/WalletQueries/wallet09",nextraLayout:o.ZP,themeConfig:n.Z};s.default=(0,t.j)(h)},2069:function(e,s,a){"use strict";var l=a(5893);a(7294);let t={logo:(0,l.jsx)("span",{children:(0,l.jsx)("b",{children:"Ledger Sync"})}),project:{link:"https://github.com/cardano-foundation/cf-ledger-sync"},chat:{link:"https://discord.gg/jw3yeYJw"},docsRepositoryBase:"https://github.com/cardano-foundation/cf-ledger-sync",footer:{text:"Ledger Sync project"},useNextSeoProps:()=>({titleTemplate:"%s – Ledger Sync"}),head:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("meta",{property:"description",content:"Ledger Sync is a Java-based application designed to provide efficient access to Cardano blockchain data"}),(0,l.jsx)("meta",{property:"og:title",content:"Ledger Sync is a Java-based application designed to provide efficient access to Cardano blockchain data"}),(0,l.jsx)("meta",{property:"og:description",content:"Ledger Sync is a Java-based application designed to provide efficient access to Cardano blockchain data"})]})};s.Z=t},5789:function(){}},function(e){e.O(0,[942,888,774,179],function(){return e(e.s=680)}),_N_E=e.O()}]);